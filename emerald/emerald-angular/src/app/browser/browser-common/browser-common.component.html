<div *ngIf="_browserService.treePaneSelection; else noselection">
  <div [ngSwitch]="_browserService.treePaneSelection.type">
    <div *ngSwitchCase="nodeType.Zip">
      <p>Zip file</p>
    </div>
    <div *ngSwitchCase="nodeType.Folder">
      <p>Folder</p>
    </div>
    <div *ngSwitchCase="nodeType.Image">
      <div *ngIf="_browserService.imageMetaEditor | async; else nometa; let editor">
        <div id="navtabs">
          <ul class="nav nav-tabs">
            <li class="nav-item">
              <a [ngClass]="_navLinkClass(browserView.Overview)"
                 [routerLink]="_routerLink(browserView.Overview, editor)">Whole page</a>
            </li>
            <li class="nav-item">
              <a [ngClass]="_navLinkClass(browserView.Selections)"
                 [routerLink]="_routerLink(browserView.Selections, editor)">Selections</a>
            </li>
          </ul>
        </div>
        <div *ngIf="editor.dimensions | async; else nodimensions; let dimensions">
          <div *ngIf="editor.regionsInScope | async; else noregions; let regionsInScope"
               [ngSwitch]="view"
               [ngBusy]="editor.busyIndicator">
            <app-img-region-editor *ngSwitchCase="browserView.Overview"
              [editor]="editor"
              [regions]="regionsInScope"
              [dimensions]="dimensions">
            </app-img-region-editor>
            <app-img-region-editor-bysel *ngSwitchCase="browserView.Selections"
              [editor]="editor"
              [regions]="regionsInScope"
              [dimensions]="dimensions">
            </app-img-region-editor-bysel>
          </div>
          <ng-template #noregions>
            <p>Loading ...</p>
          </ng-template>
        </div>
        <ng-template #nodimensions>
          <app-img-dimension-probe
            [href]="probeHref(editor)"
            (output)="editor.updateDimensions($event)">
          </app-img-dimension-probe>
        </ng-template>
      </div>
      <ng-template #nometa>
        <p>Loading ...</p>
      </ng-template>
    </div>
  </div>
</div>
<ng-template #noselection>
  <p>No selection</p>
</ng-template>
